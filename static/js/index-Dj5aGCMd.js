import{T as B,A as j,d as F,r as p,e as r,G as V,c as O,o as b,f as t,H as h,i as o,m as C,l as e,n as k,j as D,h as L,t as S,I as Q,D as T}from"./index-BsWVLLtj.js";function z(m){return B({url:"/system/online/list",method:"get",params:m})}function A(m){return B({url:"/system/online/"+m,method:"delete"})}const E={class:"app-container"},G=j({name:"Online"}),M=Object.assign(G,{setup(m){const{proxy:f}=F(),N=p([]),_=p(!0),g=p(0),a=p(1),s=p(10),u=p({ipaddr:void 0,userName:void 0});function v(){_.value=!0,z(u.value).then(i=>{N.value=i.rows,g.value=i.total,_.value=!1})}function c(){a.value=1,v()}function I(){f.resetForm("queryRef"),c()}function R(i){f.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?').then(function(){return A(i.tokenId)}).then(()=>{v(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}return v(),(i,l)=>{const x=r("el-input"),y=r("el-form-item"),w=r("el-button"),U=r("el-form"),d=r("el-table-column"),$=r("el-table"),q=r("pagination"),K=V("hasPermi"),P=V("loading");return b(),O("div",E,[t(U,{model:e(u),ref:"queryRef",inline:!0},{default:o(()=>[t(y,{label:"登录地址",prop:"ipaddr"},{default:o(()=>[t(x,{modelValue:e(u).ipaddr,"onUpdate:modelValue":l[0]||(l[0]=n=>e(u).ipaddr=n),placeholder:"请输入登录地址",clearable:"",style:{width:"200px"},onKeyup:C(c,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"用户名称",prop:"userName"},{default:o(()=>[t(x,{modelValue:e(u).userName,"onUpdate:modelValue":l[1]||(l[1]=n=>e(u).userName=n),placeholder:"请输入用户名称",clearable:"",style:{width:"200px"},onKeyup:C(c,["enter"])},null,8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(w,{type:"primary",icon:"Search",onClick:c},{default:o(()=>l[4]||(l[4]=[k("搜索")])),_:1,__:[4]}),t(w,{icon:"Refresh",onClick:I},{default:o(()=>l[5]||(l[5]=[k("重置")])),_:1,__:[5]})]),_:1})]),_:1},8,["model"]),h((b(),D($,{data:e(N).slice((e(a)-1)*e(s),e(a)*e(s)),style:{width:"100%"}},{default:o(()=>[t(d,{label:"序号",width:"50",type:"index",align:"center"},{default:o(n=>[L("span",null,S((e(a)-1)*e(s)+n.$index+1),1)]),_:1}),t(d,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),t(d,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),t(d,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),t(d,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:o(n=>[L("span",null,S(i.parseTime(n.row.loginTime)),1)]),_:1}),t(d,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(n=>[h((b(),D(w,{link:"",type:"primary",icon:"Delete",onClick:H=>R(n.row)},{default:o(()=>l[6]||(l[6]=[k("强退")])),_:2,__:[6]},1032,["onClick"])),[[K,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[P,e(_)]]),h(t(q,{total:e(g),page:e(a),"onUpdate:page":l[2]||(l[2]=n=>T(a)?a.value=n:null),limit:e(s),"onUpdate:limit":l[3]||(l[3]=n=>T(s)?s.value=n:null)},null,8,["total","page","limit"]),[[Q,e(g)>0]])])}}});export{M as default};
